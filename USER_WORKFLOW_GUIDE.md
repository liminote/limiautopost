# LimiAutoPost 使用者工作流程指南

## 目錄
- [管理者使用流程和規則](#管理者使用流程和規則)
- [使用者使用流程和規則](#使用者使用流程和規則)
- [重要規則總結](#重要規則總結)
- [常見問題和注意事項](#常見問題和注意事項)
- [更新日誌](#更新日誌)

---

## 管理者使用流程和規則

### 1. 管理者的主要工作
管理者就像是這個平台的「總編輯」，負責設定基本的遊戲規則，讓所有使用者都能按照統一的標準來生成貼文。

### 2. 管理者的具體流程

#### 第一步：進入管理後台
- 登入後，點擊「管理」選單
- 選擇「AI 生成器」頁面
- 這裡會看到 4 個系統預設的模板

#### 第二步：編輯系統模板
- 每個模板都有 4 個欄位可以修改：
  - **平台**：選擇這個模板要用在哪個平台（Threads、Instagram、Facebook、通用）
  - **模板標題**：給模板取個名字，比如「生活體悟」、「專業分享」
  - **模板描述**：簡單說明這個模板的用途
  - **prompt**：最重要的部分！告訴 AI 要怎麼生成內容，包括字數限制、內容要求等

#### 第三步：保存和同步
- 修改完後點擊「儲存」
- 系統會自動把這些更新同步到所有使用者的介面
- **重要規則**：不管任何使用者在任何電腦上，看到的都會是最新的模板內容

### 3. 管理者的權限規則
- ✅ **可以**：修改所有 4 個系統模板的內容
- ✅ **可以**：調整模板的平台設定
- ✅ **可以**：更新 AI 提示詞
- ✅ **可以**：查看所有用戶的活動
- ❌ **不能**：刪除系統模板
- ❌ **不能**：修改用戶的個人模板

---

## 使用者使用流程和規則

### 1. 使用者的主要工作
使用者就像是「內容創作者」，利用管理者設定的模板，快速生成高質量的社交媒體貼文。

### 2. 使用者的具體流程

#### 第一步：選擇模板
- 進入「設定」頁面
- 從 4 個系統模板中選擇
- 可以自己創建個人模板
- **規則**：總共最多只能選 5 個模板來生成內容（系統模板 + 個人模板的任意組合）

#### 第二步：生成貼文
- 進入「生成器」頁面
- 輸入一篇長文（比如部落格文章、心得分享）
- 選擇要使用的 AI 模型（Gemini 或 ChatGPT）
- 點擊「生成貼文」
- AI 會根據選中的模板，為每個模板生成一篇貼文

#### 第三步：編輯和選擇
- 檢查生成的內容，可以手動編輯
- 選擇要加入追蹤列表的貼文
- 可以為貼文添加標籤

#### 第四步：發布管理
- 進入「追蹤列表」頁面
- 看到所有選中的貼文
- 點擊「發布」按鈕，自動發布到 Threads
- 其他平台（Instagram、Facebook）需要手動發布

### 3. 使用者的權限規則

#### 模板相關
- ✅ **可以**：選擇系統模板（最多 5 個）
- ✅ **可以**：創建個人模板（數量無明確限制）
- ✅ **可以**：編輯自己的個人模板
- ✅ **可以**：刪除自己的個人模板
- ❌ **不能**：修改系統模板
- ❌ **不能**：看到其他用戶的個人模板

#### 內容相關
- ✅ **可以**：生成無限數量的貼文
- ✅ **可以**：編輯生成的內容
- ✅ **可以**：為貼文添加標籤
- ✅ **可以**：管理自己的追蹤列表
- ❌ **不能**：看到其他用戶的內容

#### 發布相關
- ✅ **可以**：發布到已授權的 Threads 帳號
- ✅ **可以**：查看發布狀態和數據
- ❌ **不能**：發布到其他用戶的帳號

---

## 重要規則總結

### 1. 模板同步規則
- 管理者的修改會**立即同步**到所有使用者
- 使用者不需要手動更新，系統會自動抓取最新模板
- 如果 GitHub 同步失敗，會使用本地備用版本

### 2. 內容生成規則
- 每個模板都會生成一篇貼文
- 不同 AI 模型的結果會累積顯示
- 生成的內容會根據模板的 prompt 來控制字數和風格

### 3. 發布規則
- 只有 Threads 支援自動發布
- 其他平台需要手動複製內容去發布
- 每個用戶只能發布到自己的帳號

### 4. 數據隔離規則
- 每個用戶的數據完全隔離
- 不會看到其他用戶的內容、模板、設定
- 只有系統模板是共用的

### 5. 分支代碼系統規則
- **編碼格式**：`{平台字母}{序號}`（例如：T1、T2、I1、F1、G1）
- **平台字母對應**：
  - **T**：Threads 平台
  - **I**：Instagram 平台
  - **F**：Facebook 平台
  - **G**：General（通用平台）
- **序號規則**：
  - 同一原文的同一平台會自動遞增編號
  - 內容修改時會生成新的分支代碼
  - 避免重複的 postId（articleId-branchCode）
- **特殊代碼**：`MAN`（手動創建的貼文，已棄用）

### 6. 追蹤列表編碼原則
- **貼文ID格式**：`{原文ID}-{分支代碼}`
- **編碼規則**：
  - **原文ID**：`A{序號}` 格式（例如：A001、A002、A003）
  - **分支代碼**：`{平台字母}{序號}` 格式（例如：T1、T2、I1、F1）
  - **完整範例**：`A001-T1`、`A001-T2`、`A002-I1`、`A003-F1`
- **編碼邏輯**：
  - 同一原文的同一平台會自動遞增序號
  - 內容修改時會生成新的分支代碼
  - 系統自動去重，避免重複的 postId
- **編碼意義**：
  - 便於識別和管理不同平台的貼文
  - 支援多平台內容的統一追蹤
  - 避免不同平台貼文的ID衝突
  - 支援同一原文的多變體版本

---

## 常見問題和注意事項

### 1. 模板同步問題
**問題**：管理者修改模板後，使用者看到的還是舊內容
**解決**：檢查 GitHub 同步是否正常，或手動重新載入頁面

### 2. 權限問題
**問題**：使用者無法編輯系統模板
**說明**：這是正常現象，只有管理者可以編輯系統模板

### 3. 發布失敗
**問題**：Threads 發布失敗
**檢查**：Threads 授權是否過期，需要重新授權

### 4. AI 生成問題
**問題**：生成的內容不符合預期
**檢查**：模板的 prompt 設定是否正確，AI 服務是否正常

---

## 更新日誌

### 2025-01-19
- 創建初始版本的使用者工作流程指南
- 包含管理者和使用者的完整流程說明
- 記錄重要規則和權限設定
- 添加常見問題和解決方案

---

## 邏輯檢查清單

每次更新此文件時，請檢查以下邏輯是否一致：

### 權限邏輯檢查
- [ ] 管理者的權限是否包含所有必要的系統管理功能？
- [ ] 使用者的權限是否限制在合理的個人範圍內？
- [ ] 是否有權限衝突或重疊？

### 流程邏輯檢查
- [ ] 各步驟的順序是否合理？
- [ ] 是否有遺漏的步驟？
- [ ] 錯誤處理流程是否完整？

### 規則一致性檢查
- [ ] 各項規則之間是否矛盾？
- [ ] 規則是否與實際功能一致？
- [ ] 是否有過時或錯誤的規則？

### 數據流邏輯檢查
- [ ] 模板同步機制是否合理？
- [ ] 用戶數據隔離是否完整？
- [ ] 發布流程是否安全？

---

**注意**：此文件應與實際的程式碼和功能保持同步。如果發現任何邏輯不一致或功能變更，請立即更新此文件並通知相關人員。
